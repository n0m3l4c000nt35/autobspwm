#!/bin/bash

# Función para verificar si un comando se ejecutó correctamente
check_command() {
    if [ $? -eq 0 ]; then
        echo "[OK] $1"
    else
        echo "[ERROR] $1"
        exit 1
    fi
}

install_bspwm() {
    echo "Instalando bspwm..."
    sudo apt install libxcb-xinerama0-dev libxcb-icccm4-dev libxcb-randr0-dev libxcb-util0-dev libxcb-ewmh-dev libxcb-keysyms1-dev libxcb-shape0-dev -y
    check_command "Instalación de dependencias de bspwm"

    cd ~/Downloads
    git clone https://github.com/baskerville/bspwm.git
    git clone https://github.com/baskerville/sxhkd.git
    cd bspwm
    make
    sudo make install
    check_command "Instalación de bspwm"

    which bspwm
    check_command "Verificación de la instalacón de bspw"
}

# Actualizar el sistema
# sudo apt update && sudo apt upgrade -y
# check_command "Actualización del sistema"

# Instalar dependencias básicas
sudo apt install git wget curl build-essential -y
check_command "Instalación de dependencias básicas"

# Crear directorios necesarios
mkdir -p ~/.config/{bspwm,sxhkd,kitty,picom,polybar}
check_command "Creación de directorios de configuración"

# Función principal
main() {
    # Aquí iremos añadiendo las funciones para cada paso
    echo "Comenzando la personalización del sistema..."
    install_bspwm
}

# Ejecutar la función principal
main
